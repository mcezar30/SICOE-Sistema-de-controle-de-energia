CREATE DATABASE SICOE CHARACTER SET utf8 COLLATE utf8_general_ci;

USE SICOE;

CREATE TABLE TIPOUSUARIO (
	CODTIPUSU INT UNSIGNED NOT NULL AUTO_INCREMENT,
	DESTIPUSU VARCHAR(50) DEFAULT 'C',
    CONSTRAINT pk_tipousuario PRIMARY KEY(CODTIPUSU)
);

CREATE TABLE USUARIO (
  EMAUSU     VARCHAR(50) NOT NULL,
  NOMUSU    VARCHAR(50) NOT NULL,
  PASUSU     VARCHAR(32),
  CPFUSU   INTEGER (11),
  TIPUSU INT UNSIGNED  NOT NULL,
  CONSTRAINT pk_usuario PRIMARY KEY(EMAUSU),
  CONSTRAINT fk_tipousuario FOREIGN KEY(TIPUSU)
  REFERENCES TIPOUSUARIO (CODTIPUSU)
  );

CREATE TABLE TIPOPRODUTO(
	CODTIPPRO INT UNSIGNED NOT NULL AUTO_INCREMENT,
	DESTIPPRO VARCHAR(50) NOT NULL,
	CONSTRAINT pk_tipoproduto PRIMARY KEY(CODTIPPRO)
);

CREATE TABLE PRODUTO(
	CODPRO INT UNSIGNED NOT NULL AUTO_INCREMENT,
	NOMPRO VARCHAR(50) NOT NULL,
	POTPRO FLOAT NOT NULL,
	POTSBYPRO FLOAT NOT NULL,
	DESPRO VARCHAR(50) NOT NULL,
	VOLPRO FLOAT NOT NULL,
    CONSTRAINT pk_produto PRIMARY KEY(CODPRO)

);



CREATE TABLE ESTIMATIVAPRODUTO(
	CODUSU INT UNSIGNED NOT NULL,
	CODPRO INT UNSIGNED NOT NULL,
	DATCON DATE,
	HORCON INTEGER,
	CONSTRAINT pk_tipoproduto PRIMARY KEY(CODUSU, CODPRO)
);

INSERT INTO TIPOUSUARIO(DESTIPUSU)
VALUES ('A');

INSERT INTO TIPOUSUARIO(DESTIPUSU)
VALUES ('C');